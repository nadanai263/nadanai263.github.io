<p>Today I got RVM to work, after trying to follow the completely accurate but not so helpful <a href="https://rvm.io/rvm/install">official documentation</a>, and then resorting to more friendly tutorials (like <a href="https://usabilityetc.com/articles/ruby-on-mac-os-x-with-rvm/">this one</a> and <a href="https://sirupsen.com/get-started-right-with-rvm/">this one</a>). RVM is the Ruby Version Manager. The idea is the same as with python virtual environments. Basically you install RVM, which allows you to then have multiple independent versions of Ruby, completely separate from the system Ruby which you don’t touch. Ruby packages (‘gems’) are also installed under what are called ‘gemsets’. You can import and export gemsets in the same way as python’s pip requirement files, and additionally you can match a gemset to different versions of Ruby. So it’s a nice way of keeping everything organised: for a given project, you can specify the Ruby version as well as a gemset, which are its dependencies.</p>

<p>I wanted to do this so I could look at my website locally, without having to wait for Github to build it every time (which takes a couple of minutes).</p>

<p>The problem was my Homebrew was completely mucked up. After reinstalling Homebrew (and my <a href="https://fishshell.com">Fish</a> shell), I needed to install <code class="highlighter-rouge">gpg</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install gnupg 
</code></pre></div></div>

<p>followed by RVM itself</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB

curl -sSL https://get.rvm.io | bash -s stable
</code></pre></div></div>

<p>which uses some key authentication I don’t understand yet. This installation also brings in the latest version of Ruby and sets that as RVM’s default. To make it work with Fish shell I had to run</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -L --create-dirs -o ~/.config/fish/functions/rvm.fish https://raw.github.com/lunks/fish-nuggets/master/functions/rvm.fish
</code></pre></div></div>

<p>and add one line to my <code class="highlighter-rouge">config.fish</code> file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo "rvm default" &gt;&gt; ~/.config/fish/config.fish.
</code></pre></div></div>

<p>To test the installation, I ran some basic commands. <code class="highlighter-rouge">rvm system</code> switches to the system Ruby, and <code class="highlighter-rouge">rvm default</code> switches to the new pristine Ruby (version 2.5.1 in my case). I created a new gemset called lbnc with <code class="highlighter-rouge">rvm gemset create lbnc</code>, checked what was in it using <code class="highlighter-rouge">gem list</code>, and installed the github-pages gem using <code class="highlighter-rouge">gem install github-pages</code>. Finally, I navigated to the local clone of my site’s repository and ran <code class="highlighter-rouge">jekyll serve</code>, which builds a <code class="highlighter-rouge">_sites</code> folder containing the generated html files, and starts the server. Opening <code class="highlighter-rouge">http://127.0.0.1:4000</code> on my browser then lets me look at my site. Finally, it was working!</p>
