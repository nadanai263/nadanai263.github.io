

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Getting Twitter data with Python</title>
    <meta name="description" content="A journey of a million steps begins with one... and so I begin my with my first post in the new world of data science! In this tutorial, I will demonstrate how to scrape, or obtain, data from Twitter, and do some simple analysis on the results.">
    <meta name="author" content="Nadanai Laohakunakorn">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">  
  <!--    <link href="/assets/themes/twitter/bootstrap/css/cosmo.css" rel="stylesheet"> -->
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
 <!--   <link href="/assets/themes/twitter/css/kbroman.css" rel="stylesheet" type="text/css" media="all">   -->
    <link href="/assets/themes/twitter/css/nl.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->

    <!-- atom & rss feed -->
    <link href="nil" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="nil" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">Nadanai Laohakunakorn</a>
          <ul class="nav">
            <li><a href="/pages/tutorials.html">Tutorials</a></li>
            <li><a href="/pages/algorithms.html">Algorithms</a></li>
            <li><a href="/pages/CV.html">CV</a></li>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        

<div class="page-header">
  <h1>Getting Twitter data with Python </h1>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="date">
      <span>14 November 2018</span>
    </div>
    <div class="content">
      <p>A journey of a million steps begins with one… and so I begin my with my first post in the new world of data science! In this tutorial, I will demonstrate how to scrape, or obtain, data from Twitter, and do some simple analysis on the results.</p>

<p>Twitter is a rich source of textual data and metadata, which contains myriad complex information about users’ interests, preferences, interactions, locations, and behaviour; it’s therefore very useful and interesting to be able to mine this resource. While the <a href="https://developer.twitter.com/content/developer-twitter/en.html">Twitter API</a> itself is already friendly to use, python wrappers make the experience even easier: by running simple python commands we can query Twitter to obtain users’ tweets and associated metadata. Here I demonstrate the most basic interaction with the Twitter API through a python wrapper, <code class="highlighter-rouge">python-twitter</code>.</p>

<p>The tutorial contains the following sections:</p>

<ul id="markdown-toc">
  <li><a href="#1-getting-started" id="markdown-toc-1-getting-started">1. Getting started</a></li>
  <li><a href="#2-getting-authorization-to-access-twitter-data" id="markdown-toc-2-getting-authorization-to-access-twitter-data">2. Getting authorization to access Twitter data</a></li>
  <li><a href="#3-make-an-api-query" id="markdown-toc-3-make-an-api-query">3. Make an API query</a></li>
  <li><a href="#4-finding-out-whats-trending" id="markdown-toc-4-finding-out-whats-trending">4. Finding out what’s trending</a></li>
  <li><a href="#5-simple-analysis-number-of-words-per-tweet" id="markdown-toc-5-simple-analysis-number-of-words-per-tweet">5. Simple analysis: number of words per tweet</a></li>
  <li><a href="#5-conclusions" id="markdown-toc-5-conclusions">5. Conclusions</a></li>
</ul>
<!-- toc -->

<h3 id="1-getting-started">1. Getting started</h3>
<p>First, we need the following libraries: <code class="highlighter-rouge">python-twitter</code> and <code class="highlighter-rouge">json</code>. We can install these to our virtual environment using <code class="highlighter-rouge">pip</code> as always (I highly recommend you to use your python in a virtual environment… please see my (upcoming) tutorial for this!):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install python-twitter
</code></pre></div></div>
<p><code class="highlighter-rouge">python-twitter</code> is a python wrapper for Twitter’s API, which allows you to interact and query Twitter data directly using python code. With the installation in place we are ready to go!</p>

<h3 id="2-getting-authorization-to-access-twitter-data">2. Getting authorization to access Twitter data</h3>
<p>To access Twitter data, you need to first of all create a developer account. This can be easily done through their developer platform. The reason for this is that you will need to login with your Twitter account (of course you need to make one if you haven’t already got one) to access the data. To apply for a developer account, follow the instructions on their <a href="https://developer.twitter.com/content/developer-twitter/en.html">developer website</a>. You will need to answer a few questions about why you want to set one up; I chose ‘study/student projects’ as that was most applicable. The rest of the steps were quite straightforward.</p>

<p>Once the account is set up, you will need to create an ‘app’: this allows you to obtain four important pieces of information: the <code class="highlighter-rouge">consumer key</code>, the <code class="highlighter-rouge">consumer secret</code>, the <code class="highlighter-rouge">access key</code>, and the <code class="highlighter-rouge">access secret</code>. You’ll need to fill in some more information (such as giving a URL for your website; any will do). Finally, with these four unique tokens, you will be able to access the Twitter API. Keep the tokens safe, and treat them like you would any other password.</p>

<h3 id="3-make-an-api-query">3. Make an API query</h3>
<p>First we need to instantiate the twitter API with our unique tokens:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">twitter</span>

<span class="n">CONSUMER_KEY</span> <span class="o">=</span> <span class="s">'yourvalues'</span> <span class="c"># replace these with your unique values</span>
<span class="n">CONSUMER_SECRET</span> <span class="o">=</span> <span class="s">'yourvalues'</span>
<span class="n">OAUTH_TOKEN</span> <span class="o">=</span> <span class="s">'yourvalues'</span>
<span class="n">OAUTH_TOKEN_SECRET</span> <span class="o">=</span> <span class="s">'yourvalues'</span>

<span class="n">twitter_api</span> <span class="o">=</span> <span class="n">twitter</span><span class="o">.</span><span class="n">Api</span><span class="p">(</span><span class="n">consumer_key</span><span class="o">=</span><span class="n">CONSUMER_KEY</span><span class="p">,</span>
                         <span class="n">consumer_secret</span><span class="o">=</span><span class="n">CONSUMER_SECRET</span><span class="p">,</span>
                         <span class="n">access_token_key</span><span class="o">=</span><span class="n">OAUTH_TOKEN</span><span class="p">,</span>
                         <span class="n">access_token_secret</span><span class="o">=</span><span class="n">OAUTH_TOKEN_SECRET</span><span class="p">)</span>
</code></pre></div></div>

<p>If this code block runs successfully, you will have successfully used your credientials to gain authorization to query the Twitter API. So, let’s make our first API query:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">statuses</span> <span class="o">=</span> <span class="n">twitter_api</span><span class="o">.</span><span class="n">GetUserTimeline</span><span class="p">(</span><span class="n">screen_name</span><span class="o">=</span><span class="s">'nadanai263'</span><span class="p">,</span><span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>
<p>Here I call the <code class="highlighter-rouge">GetUserTimeline()</code> method of the API. This queries the timeline of a user, which in this case is myself; we ask for the latest item on my (very old) timeline. The <code class="highlighter-rouge">statuses</code> object returned is a list of <code class="highlighter-rouge">Status()</code> objects associated with the <code class="highlighter-rouge">python-twitter</code> wrapper. Each <code class="highlighter-rouge">Status()</code> object is a tweet and all its associated metadata; in this case, we have asked for only the latest tweet, which we can first convert to a dict() and view:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">statusdict</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">AsDict</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">statuses</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">statusdict</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="n">Out</span><span class="p">:</span> 
<span class="p">{</span><span class="s">'created_at'</span><span class="p">:</span> <span class="s">'Sat Jan 04 16:34:17 +0000 2014'</span><span class="p">,</span>
 <span class="s">'hashtags'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'text'</span><span class="p">:</span> <span class="s">'Bangkok'</span><span class="p">},</span> <span class="p">{</span><span class="s">'text'</span><span class="p">:</span> <span class="s">'Thailand'</span><span class="p">}],</span>
 <span class="s">'id'</span><span class="p">:</span> <span class="mi">419507083726180352</span><span class="p">,</span>
 <span class="s">'id_str'</span><span class="p">:</span> <span class="s">'419507083726180352'</span><span class="p">,</span>
 <span class="s">'lang'</span><span class="p">:</span> <span class="s">'en'</span><span class="p">,</span>
 <span class="s">'media'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'display_url'</span><span class="p">:</span> <span class="s">'pic.twitter.com/whArUIBEce'</span><span class="p">,</span>
   <span class="s">'expanded_url'</span><span class="p">:</span> <span class="s">'https://twitter.com/nadanai263/status/419507083726180352/photo/1'</span><span class="p">,</span>
   <span class="s">'id'</span><span class="p">:</span> <span class="mi">419507083734568960</span><span class="p">,</span>
   <span class="s">'media_url'</span><span class="p">:</span> <span class="s">'http://pbs.twimg.com/media/BdJjeFLCUAAUWJm.jpg'</span><span class="p">,</span>
   <span class="s">'media_url_https'</span><span class="p">:</span> <span class="s">'https://pbs.twimg.com/media/BdJjeFLCUAAUWJm.jpg'</span><span class="p">,</span>
   <span class="s">'sizes'</span><span class="p">:</span> <span class="p">{</span><span class="s">'large'</span><span class="p">:</span> <span class="p">{</span><span class="s">'h'</span><span class="p">:</span> <span class="mi">640</span><span class="p">,</span> <span class="s">'resize'</span><span class="p">:</span> <span class="s">'fit'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">:</span> <span class="mi">960</span><span class="p">},</span>
    <span class="s">'medium'</span><span class="p">:</span> <span class="p">{</span><span class="s">'h'</span><span class="p">:</span> <span class="mi">640</span><span class="p">,</span> <span class="s">'resize'</span><span class="p">:</span> <span class="s">'fit'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">:</span> <span class="mi">960</span><span class="p">},</span>
    <span class="s">'small'</span><span class="p">:</span> <span class="p">{</span><span class="s">'h'</span><span class="p">:</span> <span class="mi">453</span><span class="p">,</span> <span class="s">'resize'</span><span class="p">:</span> <span class="s">'fit'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">:</span> <span class="mi">680</span><span class="p">},</span>
    <span class="s">'thumb'</span><span class="p">:</span> <span class="p">{</span><span class="s">'h'</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="s">'resize'</span><span class="p">:</span> <span class="s">'crop'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">:</span> <span class="mi">150</span><span class="p">}},</span>
   <span class="s">'type'</span><span class="p">:</span> <span class="s">'photo'</span><span class="p">,</span>
   <span class="s">'url'</span><span class="p">:</span> <span class="s">'http://t.co/whArUIBEce'</span><span class="p">}],</span>
 <span class="s">'source'</span><span class="p">:</span> <span class="s">'&lt;a href="http://twitter.com" rel="nofollow"&gt;Twitter Web Client&lt;/a&gt;'</span><span class="p">,</span>
 <span class="s">'text'</span><span class="p">:</span> <span class="s">'What is happening to my country? #Bangkok #Thailand http://t.co/whArUIBEce'</span><span class="p">,</span>
 <span class="s">'urls'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'user'</span><span class="p">:</span> <span class="p">{</span><span class="s">'created_at'</span><span class="p">:</span> <span class="s">'Sat Dec 15 16:45:36 +0000 2012'</span><span class="p">,</span>
  <span class="s">'default_profile'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
  <span class="s">'description'</span><span class="p">:</span> <span class="s">'Scientist and musician'</span><span class="p">,</span>
  <span class="s">'followers_count'</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
  <span class="s">'friends_count'</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
  <span class="s">'id'</span><span class="p">:</span> <span class="mi">1013539350</span><span class="p">,</span>
  <span class="s">'id_str'</span><span class="p">:</span> <span class="s">'1013539350'</span><span class="p">,</span>
  <span class="s">'lang'</span><span class="p">:</span> <span class="s">'en'</span><span class="p">,</span>
  <span class="s">'listed_count'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">'location'</span><span class="p">:</span> <span class="s">'Cambridge'</span><span class="p">,</span>
  <span class="s">'name'</span><span class="p">:</span> <span class="s">'Nadanai L'</span><span class="p">,</span>
  <span class="s">'profile_background_color'</span><span class="p">:</span> <span class="s">'C0DEED'</span><span class="p">,</span>
  <span class="s">'profile_background_image_url'</span><span class="p">:</span> <span class="s">'http://abs.twimg.com/images/themes/theme1/bg.png'</span><span class="p">,</span>
  <span class="s">'profile_background_image_url_https'</span><span class="p">:</span> <span class="s">'https://abs.twimg.com/images/themes/theme1/bg.png'</span><span class="p">,</span>
  <span class="s">'profile_banner_url'</span><span class="p">:</span> <span class="s">'https://pbs.twimg.com/profile_banners/1013539350/1361963151'</span><span class="p">,</span>
  <span class="s">'profile_image_url'</span><span class="p">:</span> <span class="s">'http://pbs.twimg.com/profile_images/3314384686/f84461bb253ffa004d6a94a1477ad22c_normal.jpeg'</span><span class="p">,</span>
  <span class="s">'profile_image_url_https'</span><span class="p">:</span> <span class="s">'https://pbs.twimg.com/profile_images/3314384686/f84461bb253ffa004d6a94a1477ad22c_normal.jpeg'</span><span class="p">,</span>
  <span class="s">'profile_link_color'</span><span class="p">:</span> <span class="s">'1DA1F2'</span><span class="p">,</span>
  <span class="s">'profile_sidebar_border_color'</span><span class="p">:</span> <span class="s">'C0DEED'</span><span class="p">,</span>
  <span class="s">'profile_sidebar_fill_color'</span><span class="p">:</span> <span class="s">'DDEEF6'</span><span class="p">,</span>
  <span class="s">'profile_text_color'</span><span class="p">:</span> <span class="s">'333333'</span><span class="p">,</span>
  <span class="s">'profile_use_background_image'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
  <span class="s">'screen_name'</span><span class="p">:</span> <span class="s">'nadanai263'</span><span class="p">,</span>
  <span class="s">'statuses_count'</span><span class="p">:</span> <span class="mi">25</span><span class="p">},</span>
 <span class="s">'user_mentions'</span><span class="p">:</span> <span class="p">[]}</span>
</code></pre></div></div>
<p>As you can see, each tweet is associated with a rich set of metadata, which will be invaluable for later analysis.</p>

<p>We’ve successfully used the Twitter API to query a user and obtain their latest tweet. Now let’s get a wider picture of what’s going on in the Twitter universe by looking at trends.</p>

<h3 id="4-finding-out-whats-trending">4. Finding out what’s trending</h3>
<p>We can query ‘trends’, or popular topics. These can be localised to specific places using a system called the Yahoo! Where On Earth ID (WOEID). For example, the following query</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">WORLD_WOEID_ID</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">UK_WOEID_ID</span> <span class="o">=</span> <span class="mi">23424975</span>
<span class="n">world_trends</span> <span class="o">=</span> <span class="n">twitter_api</span><span class="o">.</span><span class="n">GetTrendsWoeid</span><span class="p">(</span><span class="n">WORLD_WOEID_ID</span><span class="p">)</span> 
<span class="n">uk_trends</span> <span class="o">=</span> <span class="n">twitter_api</span><span class="o">.</span><span class="n">GetTrendsWoeid</span><span class="p">(</span><span class="n">UK_WOEID_ID</span><span class="p">)</span>
</code></pre></div></div>
<p>returns a list of the 10 most popular hashtags (as measured by tweet volume), specific to a particular location as given by the WOEID. Each object can be converted to a dictionary, and then printed in an intelligible way using the <code class="highlighter-rouge">json</code> package:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">json</span>

<span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">AsDict</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">world_trends</span><span class="p">],</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">AsDict</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">uk_trends</span><span class="p">],</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>

<span class="n">Out</span><span class="p">:</span>
<span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="s">"#NationalPickleDay"</span><span class="p">,</span>
        <span class="s">"query"</span><span class="p">:</span> <span class="s">"</span><span class="si">%23</span><span class="s">NationalPickleDay"</span><span class="p">,</span>
        <span class="s">"timestamp"</span><span class="p">:</span> <span class="s">"2018-11-14T22:18:23Z"</span><span class="p">,</span>
        <span class="s">"url"</span><span class="p">:</span> <span class="s">"http://twitter.com/search?q=</span><span class="si">%23</span><span class="s">NationalPickleDay"</span><span class="p">,</span>
        <span class="s">"tweet_volume"</span><span class="p">:</span> <span class="mi">24475</span>
    <span class="p">},</span><span class="o">...</span>
</code></pre></div></div>
<p>Each object now contains a name, which represents the hashtag, and other associated information like the tweet volume, or number of times it has been tweeted. We can select only one the name, and return those in a python set:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">uk_trends_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">names</span><span class="o">.</span><span class="n">AsDict</span><span class="p">()[</span><span class="s">'name'</span><span class="p">]</span> <span class="k">for</span> <span class="n">names</span> <span class="ow">in</span> <span class="n">uk_trends</span><span class="p">])</span> 
<span class="k">print</span><span class="p">(</span><span class="n">uk_trends_set</span><span class="p">)</span>

<span class="n">Out</span><span class="p">:</span>
<span class="p">{</span><span class="s">'Jacob Rees Mogg'</span><span class="p">,</span> <span class="s">'#HouseOfTheYear'</span><span class="p">,</span> <span class="s">'#NorthernMarketingAwards'</span><span class="p">,</span> <span class="s">'#watchdoglive'</span><span class="p">,</span> <span class="s">'#WithdrawalAgreement'</span><span class="p">,</span> <span class="s">'Downing Street'</span><span class="p">,</span> <span class="s">'#MummyDiaries'</span><span class="p">,</span> <span class="s">'Fabian Delph'</span><span class="p">,</span> <span class="s">'#DevonHour'</span><span class="p">,</span> <span class="s">'#MaddoxPrize'</span><span class="p">,</span> <span class="s">'Bergh'</span><span class="p">,</span> <span class="s">'#IrishaSongorMovie'</span><span class="p">,</span> <span class="s">'#AHSApocalypse'</span><span class="p">,</span> <span class="s">'#channel4news'</span><span class="p">,</span> <span class="s">'#ClaxtonsWhisky'</span><span class="p">,</span> <span class="s">'Theresa May'</span><span class="p">,</span> <span class="s">'Chequers'</span><span class="p">,</span> <span class="s">'Greenland'</span><span class="p">,</span> <span class="s">'#handmadehour'</span><span class="p">,</span> <span class="s">'Cilic'</span><span class="p">,</span> <span class="s">'#TheApprentice'</span><span class="p">,</span> <span class="s">'My Brain'</span><span class="p">,</span> <span class="s">'#McrCultureAwards'</span><span class="p">,</span> <span class="s">'#POGDOGS'</span><span class="p">,</span> <span class="s">'#LTHEchat'</span><span class="p">,</span> <span class="s">'#NSA2018'</span><span class="p">,</span> <span class="s">'#weddinghour'</span><span class="p">,</span> <span class="s">'#mastercheftheprofessionals'</span><span class="p">,</span> <span class="s">'#jamesbulger'</span><span class="p">,</span> <span class="s">'Political Declaration'</span><span class="p">,</span> <span class="s">'David Mundell'</span><span class="p">,</span> <span class="s">'Number 10'</span><span class="p">,</span> <span class="s">'#DarkHeart'</span><span class="p">,</span> <span class="s">'#NXTUK'</span><span class="p">,</span> <span class="s">'#woofwoofwednesday'</span><span class="p">,</span> <span class="s">'Sammy Wilson'</span><span class="p">,</span> <span class="s">'#TomorrowToday'</span><span class="p">,</span> <span class="s">'#somecomms'</span><span class="p">,</span> <span class="s">'Tim Stockdale'</span><span class="p">,</span> <span class="s">'#UKGFA'</span><span class="p">,</span> <span class="s">'Michel Barnier'</span><span class="p">,</span> <span class="s">'#BrexitChaos'</span><span class="p">,</span> <span class="s">'#StripWithLittleMix'</span><span class="p">,</span> <span class="s">'United Kingdom'</span><span class="p">,</span> <span class="s">'#selfieforseb'</span><span class="p">,</span> <span class="s">'Jack Reacher'</span><span class="p">,</span> <span class="s">'Euratom'</span><span class="p">,</span> <span class="s">'#WalesNOTY2018'</span><span class="p">,</span> <span class="s">'#AHFODfilm'</span><span class="p">,</span> <span class="s">'#CoronationStreet'</span><span class="p">}</span>
</code></pre></div></div>
<p>So… these are the trending topics in the UK on the evening of the 14th November, 2018! If you run your code you’re sure to find different results.</p>

<h3 id="5-simple-analysis-number-of-words-per-tweet">5. Simple analysis: number of words per tweet</h3>
<p>Let’s select one hashtag to investigate further… how about the esteemed ‘Jacob Rees Mogg’?! By calling the <code class="highlighter-rouge">GetSearch()</code> method, we can find tweets containing that phrase:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">query</span> <span class="o">=</span> <span class="s">'Jacob Rees Mogg'</span>
<span class="n">search_results</span> <span class="o">=</span> <span class="n">twitter_api</span><span class="o">.</span><span class="n">GetSearch</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div></div>
<p>Here, we return <code class="highlighter-rouge">search_results</code>, which is a list of 100 <code class="highlighter-rouge">Status()</code>, or tweet, objects, containing the phrase ‘Jacob Rees Mogg’. We can view all of them if we want, by printing them one by one:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tweets_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">status</span><span class="o">.</span><span class="n">AsDict</span><span class="p">()[</span><span class="s">'text'</span><span class="p">]</span> <span class="k">for</span> <span class="n">status</span> <span class="ow">in</span> <span class="n">search_results</span><span class="p">])</span> 
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">tweets_set</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'--'</span><span class="p">)</span>
</code></pre></div></div>
<p>This results in a tremendous number of tweet text. But what may be more interesting than tweets about Jacob Rees Mogg is an analysis of them. Let’s count the average number of tweets in the text:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">total_words</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">total_chars</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">tweets_set</span><span class="p">:</span>
    <span class="n">total_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
    <span class="n">total_chars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">elem</span><span class="p">))</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">total_words</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">total_chars</span><span class="p">))</span>

<span class="n">Out</span><span class="p">:</span> 
<span class="mf">17.54</span>
<span class="mf">123.3</span>
</code></pre></div></div>
<p>So, tweets about Jacob Rees Mogg on average contain around 18 words and 123 characters, which is significantly longer than the <a href="https://smk.co/article/the-average-tweet-length-is-28-characters-long-and-other-interesting-facts">average tweet length</a> of 28 characters. Deeper analysis and interpretation on the literacy of people likely to tweet about Jacob Rees Mogg will be left to another post…</p>

<h3 id="5-conclusions">5. Conclusions</h3>

<p>As you can see, interacting with Twitter is straightforward. The API is simple yet powerful, and I hope to be able to show much more sophisticated analysis in the future.</p>

<p>A lot of the material in this tutorial came from Matthew Russell’s book <a href="https://www.oreilly.com/library/view/mining-the-social/9781449368180/ch01.html">Mining the Social Web</a>, as well as documentation for <a href="https://python-twitter.readthedocs.io/en/latest/index.html"><code class="highlighter-rouge">python-twitter</code></a>. A jupyter notebook is available for this tutorial on my <a href="https://github.com/nadanai263/datasciportfolio">GitHub repository</a>.</p>

    </div>

    

    

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev disabled"><a>&larr; Previous</a></li>
      
        <li><a href="/pages/projects.html">Archive</a></li>
      
        <li class="next"><a href="/2018/11/15/Getting-LinkedIn-Data-with-Python" title="Getting LinkedIn data with Python">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    
  </div>
</div>


      </div>
      <hr>
      <footer>
        <p><small>
  <!-- start of Karl's footer; modify this part -->
          <a href="https://creativecommons.org/publicdomain/zero/1.0/"><img src="https://i.creativecommons.org/p/zero/1.0/88x31.png" alt="CC0"/></a> &nbsp;
          <a href="http://nadanai263.github.io/">Nadanai Laohakunakorn</a>
  <!-- end of Karl's footer; modify this part -->
        </small></p>
      </footer>

    </div>

    
  </body>
</html>

