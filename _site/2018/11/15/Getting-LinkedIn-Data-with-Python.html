

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Getting LinkedIn data with Python</title>
    
    <meta name="author" content="Nadanai Laohakunakorn">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/twitter/css/kbroman.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->

    <!-- atom & rss feed -->
    <link href="nil" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="nil" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">Nadanai Laohakunakorn</a>
          <ul class="nav">
            <li><a href="/pages/projects.html">Projects</a></li>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        

<div class="page-header">
  <h1>Getting LinkedIn data with Python </h1>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="date">
      <span>15 November 2018</span>
    </div>
    <div class="content">
      <p>In the same way as for Twitter, we can also get data from LinkedIn. Here I show how to interface with LinkedIn’s API to access their data.</p>

<p>LinkedIn is a bit more difficult than Twitter to access; this is because the data shared there is more sensitive, and as of today (November 2018), it is not possible to access most of the data casually, without becoming a certified developer on their network. Like Twitter, LinkedIn uses something called OAuth to verify and authorise access. This process is somewhat involved (if you’re interested have a look at the <a href="https://oauth.net">OAuth website</a>), but basically is a way to allow multiple users to access protected data using the credentials of one registered user, without needing to share usernames and passwords. Most of this tutorial is focused on setting up the authentication, which is the most difficult part.</p>

<p>The tutorial contains the following sections:</p>

<ul>
  <li><a href="##heading-0">1. Getting started</a></li>
  <li><a href="##heading-1">2. Initial authorisation</a></li>
  <li><a href="###sub-heading-1">2.1 Asking for authentication code</a></li>
  <li><a href="###sub-heading-2">2.2 Using the code to get the access token</a></li>
  <li><a href="##heading-2">3. Using the API to make queries</a></li>
  <li><a href="##heading-3">4. Conclusions</a>
<!-- toc --></li>
</ul>

<h2 id="1-getting-started">1. Getting started</h2>
<p>First, we need the following libraries: <a href="https://github.com/ozgur/python-linkedin"><code class="highlighter-rouge">python3-linkedin</code></a>:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install python3-linkedin
</code></pre></div></div>

<h2 id="2-initial-authorisation">2. Initial authorisation</h2>
<p>You will then need to register and create an app on the LinkedIn <a href="https://oauth.net">developer platform</a>. You’ll need to supply some information like your business contact details and a logo(!). At the end of the process, you will end up at a page where two authentication keys are shown: a ‘client ID’, and a ‘client secret’ key. You’ll also be able to set default permissions for your app, such as allowing access to the basic profile, email address, etc. For the time being, we will only select the basic profile, by ticking <code class="highlighter-rouge">r_basicprofile</code>.</p>

<p>You’ll have to then specify a redirect URL for OAuth 2.0: this can be any valid URL beginning with ‘https://’. The purpose of this will become clear later on. I set it to my GitHub pages site.</p>

<p>Then, we’re ready to start the authentication process. This is a multi-step process, which can be broken down into two parts:</p>

<ul>
  <li>First, you ask LinkedIn for an authentication code, using your client and secret API keys.</li>
  <li>Then you use the code to obtain an access token, which can authenticate your app.</li>
</ul>

<h3 id="21-asking-for-authentication-code">2.1 Asking for authentication code</h3>
<p>In python, the first step is to initialise the authorisation with the two API keys:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'yourapikey'</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">'yourapisecret'</span>
<span class="n">RETURN_URL</span> <span class="o">=</span> <span class="s">'https://nadanai263.github.io'</span>

<span class="n">auth</span> <span class="o">=</span> <span class="n">linkedin</span><span class="o">.</span><span class="n">LinkedInAuthentication</span><span class="p">(</span><span class="n">API_KEY</span><span class="p">,</span>
                                    <span class="n">API_SECRET</span><span class="p">,</span>
                                    <span class="n">RETURN_URL</span><span class="p">,</span>
                                    <span class="p">{</span><span class="s">'r_basicprofile'</span><span class="p">:</span><span class="s">'BASIC_PROFILE'</span><span class="p">})</span> <span class="c"># permissions can be changed</span>

<span class="k">print</span><span class="p">(</span><span class="n">auth</span><span class="o">.</span><span class="n">authorization_url</span><span class="p">)</span>  <span class="c"># open this url on your browser</span>
<span class="n">application</span> <span class="o">=</span> <span class="n">linkedin</span><span class="o">.</span><span class="n">LinkedInApplication</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span>
</code></pre></div></div>
<p>We set the permissions manually, to allow access to the basic profile. The permissions set here must match that set in the app configuration. What this code block does is to instantiate an application object using the API key pair as authorisation. The URL for authorisation will be outputted; you must then point your browser to that URL to make an authorisation query. An example URL output is shown below:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://www.linkedin.com/uas/oauth2/authorization?response_type=code&amp;client_id=yourapikey&amp;scope=r_basicprofile&amp;state=bf1b9ab2950896b5e7d3f5a3dc42a718&amp;redirect_uri=https%3A//nadanai263.github.io
</code></pre></div></div>
<p>This URL can be broken up into a few parts:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://www.linkedin.com/uas/oauth2/authorization # Ask LinkedIn for authorisation
response_type=code # Ask for an authorisation code
client_id=yourapikey # This will be the same as your API key, which identifies who you are
scope=r_basicprofile # This is the permissions requested
state=bf1b9ab2950896b5e7d3f5a3dc42a718 # This is a unique ID corresponding to the 
redirect_uri=https%3A//nadanai263.github.io # This is where you'll be redirected after the query.
</code></pre></div></div>
<p>After this is sent, you’re redirected to the redirect URL page (my home page in this example), and the results of the query are appended to my site’s URL:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://nadanai263.github.io/?code=CODE&amp;state=bf1b9ab2950896b5e7d3f5a3dc42a718
</code></pre></div></div>
<p>This response contains two items: a new code for access, and another state. Make sure this value is the same as the state shown earlier; the purpose of this ID is to enable you to check that no one else has intercepted the request.</p>

<h3 id="22-using-the-code-to-get-the-access-token">2.2 Using the code to get the access token</h3>
<p>We can enter the code and ask for our access token:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">auth</span><span class="o">.</span><span class="n">authorization_code</span><span class="o">=</span><span class="s">'CODE'</span>
<span class="n">auth</span><span class="o">.</span><span class="n">get_access_token</span><span class="p">()</span>
<span class="n">Out</span><span class="p">:</span>
<span class="s">'TOKEN'</span>
</code></pre></div></div>
<p>The output can then be used to finally authenticate our application:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">application</span> <span class="o">=</span> <span class="n">linkedin</span><span class="o">.</span><span class="n">LinkedInApplication</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="s">'TOKEN'</span><span class="p">)</span>
</code></pre></div></div>
<p>The token is valid for 60 days, and so you don’t have to repeat the procedure above for a while: you can just run the application directly using this token. Phew!</p>

<h2 id="3-using-the-api-to-make-queries">3. Using the API to make queries</h2>
<p>Finally we can use the API to make queries. You can look at your own LinkedIn profile:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">application</span><span class="o">.</span><span class="n">get_profile</span><span class="p">()</span>
</code></pre></div></div>
<p>This returns a dictionary with your basic profile information. You can also make a search query:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">application</span><span class="o">.</span><span class="n">search_company</span><span class="p">(</span><span class="n">selectors</span><span class="o">=</span><span class="p">[{</span><span class="s">'companies'</span><span class="p">:</span> <span class="p">[</span><span class="s">'name'</span><span class="p">]}],</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s">'keywords'</span><span class="p">:</span> <span class="s">'apple'</span><span class="p">,</span> <span class="s">'count'</span><span class="p">:</span><span class="mi">20</span><span class="p">})</span>
<span class="n">Out</span><span class="p">:</span>
<span class="p">{</span><span class="s">'companies'</span><span class="p">:</span> <span class="p">{</span><span class="s">'_count'</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="s">'_start'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s">'_total'</span><span class="p">:</span> <span class="mi">28350</span><span class="p">,</span>
  <span class="s">'values'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Basic'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple &amp; Associates'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Vacations'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Leisure Group'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple American Group LLC'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'apple tree communications'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Authorised Distributor Portugal'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Store'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Search &amp; Selection'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Express'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Growth Partners'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Federal Credit Union'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Aviation'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple&amp;Ink'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Rehab'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple &amp; Eve LLC'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Bank'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Rock Displays'</span><span class="p">},</span>
   <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Apple Premium Reseller - Iplace'</span><span class="p">}]}}</span>
</code></pre></div></div>

<h2 id="4-conclusions">4. Conclusions</h2>

<p>Like Twitter, once you have the authentication in place, API calls are straightforward. For me, getting the authentication to work was the hardest part, especially as the procedure has changed slightly over the last few years. For instance, LinkedIn now uses OAuth 2.0, while many tutorials available only describe the old OAuth 1.0. The original <code class="highlighter-rouge">python-linkedin</code> library does not work with Python 3, necessitating the new <code class="highlighter-rouge">python3-linkedin</code> version. Finally, the lack of full accessibility with a basic developer account means that the amount of information you are able to get to is limited. In any case, this was a useful exercise in learning about OAuth 2.0.</p>

<p>A jupyter notebook is available for this tutorial on my <a href="https://github.com/nadanai263/datasciportfolio">GitHub repository</a>.</p>

    </div>

    

    

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2018/11/14/Getting-Twitter-Data-with-Python" title="Getting Twitter data with Python">&larr; Previous</a></li>
      
        <li><a href="/pages/projects.html">Archive</a></li>
      
        <li class="next"><a href="/2018/11/19/Introduction-to-Keras" title="Introduction to Keras">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    
  </div>
</div>


      </div>
      <hr>
      <footer>
        <p><small>
  <!-- start of Karl's footer; modify this part -->
          <a href="https://creativecommons.org/publicdomain/zero/1.0/"><img src="https://i.creativecommons.org/p/zero/1.0/88x31.png" alt="CC0"/></a> &nbsp;
          <a href="http://nadanai263.github.io/">Nadanai Laohakunakorn</a>
  <!-- end of Karl's footer; modify this part -->
        </small></p>
      </footer>

    </div>

    
  </body>
</html>

